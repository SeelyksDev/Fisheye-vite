(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();function $(e,t,o){const n=Number(o);let r=[];e.forEach(a=>{a.image?r.push({image:a.image,title:a.title,id:a.id}):a.video&&r.push({video:a.video,title:a.title,id:a.id})});let i=r.findIndex(a=>a.id===n),s;function d(){i=i===0?r.length-1:i-1,I()}function l(){i=i+1===r.length?0:i+1,I()}function c(){const a=document.querySelector(".lightbox-arrow-left");a.addEventListener("click",d),a.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),d())})}function m(){const a=document.querySelector(".lightbox-arrow-right");a.addEventListener("click",l),a.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),l())})}function p(){document.body.style.overflow="auto";const a=document.querySelector(".carousel-modal"),u=document.querySelector(".header-photograph"),g=document.getElementById("main"),b=document.querySelector(".price-per-day"),v=document.querySelector(".likes-stats");a.style.display="none",a.innerHTML="",a.setAttribute("aria-hidden","true"),u.setAttribute("aria-hidden","false"),u.removeAttribute("inert"),g.setAttribute("aria-hidden","false"),g.removeAttribute("inert"),b.setAttribute("aria-hidden","false"),v.setAttribute("aria-hidden","false"),b.removeAttribute("inert"),v.removeAttribute("inert"),window.removeEventListener("keydown",f);const E=document.querySelector(".lightbox-cross");E&&E.removeEventListener("keydown",y),s&&s.focus()}function y(a){a.key==="Enter"&&p()}function f(a){a.key==="Escape"?p():a.key==="ArrowLeft"?(a.preventDefault(),d()):a.key==="ArrowRight"&&(a.preventDefault(),l())}function j(){s=document.activeElement;const a=document.querySelector(".carousel-modal"),u=document.querySelector(".header-photograph"),g=document.getElementById("main"),b=document.querySelector(".price-per-day"),v=document.querySelector(".likes-stats");a.setAttribute("aria-hidden","false"),window.scrollTo({top:0}),a.style.display="block",document.body.style.overflow="hidden",a.innerHTML=`
            <div class="lightbox">
                <div class="arrow-image">
                    <img class="lightbox-cross" tabIndex="0" src="./assets/icons/red-cross.svg" alt="" aria-label="Bouton pour fermer le carrousel" />
                    <img class="lightbox-arrow-left lightbox-arrow" tabIndex="0" src="./assets/icons/red-arrow-left.svg" alt="" aria-label="Média précédant" />
                    <div class="media-title"></div>
                    <img class="lightbox-arrow-right lightbox-arrow" tabIndex="0" src="./assets/icons/red-right-arrow.svg" alt="" aria-label="Média suivant" />
                </div>
            </div>
        `,document.querySelector(".lightbox-cross").focus(),u.setAttribute("aria-hidden","true"),u.setAttribute("inert",""),g.setAttribute("aria-hidden","true"),g.setAttribute("inert",""),b.setAttribute("aria-hidden","true"),v.setAttribute("aria-hidden","true"),b.setAttribute("inert",""),v.setAttribute("inert",""),c(),m();const E=document.querySelector(".lightbox-cross");E.addEventListener("click",p),E.addEventListener("keydown",y),window.addEventListener("keydown",f),I()}function I(){const a=document.querySelector(".media-title");a&&(a.innerHTML=`
            ${r[i].image?`<img class="lightbox-media" src="assets/images/${t.name}/${r[i].image}" alt="${r[i].title}" tabIndex=0 />`:""}
            ${r[i].video?`<video controls class="lightbox-media" aria-label="${r[i].title}"><source src="assets/images/${t.name}/${r[i].video}" type="video/mp4"/></video>`:""}
            <h4 class="lightbox-title" tabIndex=0>${r[i].title}</h4>
        `)}return{getCarouselDOM:j}}function N(e,t){this.id=t.id,this.photographerId=t.photographerId,this.name=e,this.title=t.title,this.image=t.image,this.video=t.video,this.likes=t.likes,this.isLiked=!1;function o(){document.querySelector(".work-gallery").setAttribute("aria-label",`Gallerie des travaux de ${this.name}`);const r=document.createElement("article");return r.classList.add("work-card"),r.setAttribute("data-id",this.id),r.setAttribute("data-title",this.title),r.setAttribute("tabIndex","0"),r.setAttribute("aria-describedby","info-carousel"),r.innerHTML=`
            ${this.image?`<img src="assets/images/${this.name}/${this.image}" alt="${this.image}" class="card-media">`:""}
            ${this.video?`
                <video class="card-media">
                    <source src="assets/images/${this.name}/${this.video}" type="video/mp4" />
                </video>`:""}
            <div class="card-description">
                <p class="card-title">${this.title}</p>
                <div class="card-likes-stats">
                    <p class="number-likes" aria-label="${this.likes} likes">${this.likes}</p>
                    <img src="./assets/icons/red-heart.svg" alt="image d'un coeur rouge" aria-label="Bouton pour ajouter un 'j'aime' à cette photo" class="card-heart" tabIndex=0>
                </div>
            </div>
            <span id="info-carousel" hidden>Ouvre une modale contenant un carrousel.</span>
        `,_(r,t,this.isLiked,e),r}return{id:this.id,photographerId:this.photographerId,name:this.name,title:this.title,image:this.image,video:this.video,likes:this.likes,isLiked:this.isLiked,getGalleryDOM:o}}let h=0;function H(){h=0}function B(e,t,o){const n=document.querySelector(".work-gallery");n.innerHTML="",H(),h=G(t),x(o.name,h),e.forEach(s=>{const l=new N(o.name,s).getGalleryDOM();n.appendChild(l)}),document.querySelectorAll(".work-card").forEach(s=>{s.addEventListener("click",()=>{const d=s.dataset.id;$(t,o,d).getCarouselDOM()}),s.addEventListener("keydown",d=>{const l=s.dataset.id,c=$(t,o,l);d.key==="Enter"&&c.getCarouselDOM()})})}function _(e,t,o,n){const r=e.querySelector(".card-heart");r&&(r.setAttribute("role","button"),r.addEventListener("click",i=>{i.stopPropagation();const{newLikes:s,newStatus:d,newTotalLikes:l}=q(o,t.likes,h);t.likes=s,o=d,h=l,P(e,s),x(n,l)}),r.addEventListener("keydown",i=>{if(i.key==="Enter"||i.key===" "){i.preventDefault(),i.stopPropagation();const{newLikes:s,newStatus:d,newTotalLikes:l}=q(o,t.likes,h);t.likes=s,o=d,h=l,P(e,s),x(n,l)}}))}function G(e){return e.reduce((t,o)=>t+o.likes,0)}function q(e,t,o){return e?(t--,o--,e=!1,document.getElementById("status-message").textContent="Vous avez retiré votre 'j'aime'"):(t++,o++,e=!0,document.getElementById("status-message").textContent="Vous avez ajouté un 'j'aime' à cette photo"),{newLikes:t,newStatus:e,newTotalLikes:o}}function x(e,t){const o=document.querySelector(".likes-stats");o&&(o.textContent=t,o.setAttribute("aria-label",`Les travaux de ${e} comptabilisent ${t} likes au total`),o.setAttribute("tabIndex","0"))}function P(e,t){const o=e.querySelector(".number-likes");o&&(o.textContent=t)}async function S(e){const t=await F(),o=t.photographers,n=t.media,r=o.find(s=>s.id===e),i=n.filter(s=>s.photographerId===e);return{photographerProfils:r,photographerMedia:i}}async function R(e){if(e){const{photographerProfils:t}=await S(e);if(t)return new O(t).getPhotographerProfilDOM()}}async function V(e){if(e){const{photographerMedia:t,photographerProfils:o}=await S(e);if(t&&o){const n=document.querySelector(".custom-select"),r=n.querySelector(".select-title"),i=n.querySelectorAll(".options li");n.addEventListener("keydown",l=>{l.key==="Enter"&&(l.preventDefault(),n.open=!n.open,n.open&&setTimeout(()=>{const c=document.querySelector(".options li:not(.hidden)");c&&c.focus()},50))});let s=t.sort((l,c)=>c.likes-l.likes);B(s,t,o),i[0].classList.add("hidden"),i.forEach(l=>{U(l,r,n,s,t,o)}),n.addEventListener("keydown",l=>K(l,n)),M()}}}function z(){const t=new URLSearchParams(window.location.search).get("id"),o=Number(t);o&&(R(o),V(o))}function K(e,t){const o=[...document.querySelectorAll(".options li:not(.hidden)")],n=o.findIndex(r=>r===document.activeElement);e.key==="ArrowDown"?(e.preventDefault(),n<o.length-1&&o[n+1].focus()):e.key==="ArrowUp"?(e.preventDefault(),n>0&&o[n-1].focus()):e.key==="Enter"?(e.preventDefault(),n!==-1&&o[n].click()):e.key==="Escape"&&t.removeAttribute("open")}function U(e,t,o,n,r,i){e.setAttribute("tabindex","0"),e.addEventListener("click",()=>{const s=e.getAttribute("data-value"),d=e.textContent,l=document.querySelector(".options li.hidden");l&&l.classList.remove("hidden"),t.textContent=d,t.setAttribute("data-value",s),e.classList.add("hidden"),o.removeAttribute("open"),s==="popularity"?n=r.sort((c,m)=>m.likes-c.likes):s==="date"?n=r.sort((c,m)=>new Date(m.date)-new Date(c.date)):s==="title"&&(n=r.sort((c,m)=>c.title.localeCompare(m.title))),B(n,r,i),M(),setTimeout(()=>{const c=document.querySelector(".work-card");c&&c.focus()},100)})}function M(){const e=[...document.querySelectorAll(".options li:not(.hidden)")];e.forEach(t=>{t.style.borderTop="none",t.style.borderBottom="none"}),e.length>0&&(e[0].style.borderTop="1px solid white",e[0].style.borderBottom="1px solid white")}z();function C(e){e.key==="Escape"&&w()}function T(e){e.key==="Enter"&&w()}let A;function W(){A=document.activeElement,document.body.style.overflow="hidden",document.body.style.height="100vh";const e=document.getElementById("contact_modal"),t=document.querySelector(".background-modal"),o=document.querySelector(".close_modal_form"),n=document.querySelector(".header-photograph"),r=document.getElementById("main");e.style.display="block",e.setAttribute("aria-hidden","false"),t.style.display="block",o.setAttribute("tabIndex","0"),o.addEventListener("click",w),o.addEventListener("keydown",T),o.focus(),window.addEventListener("keydown",C),n.setAttribute("aria-hidden","true"),n.setAttribute("inert",""),r.setAttribute("aria-hidden","true"),r.setAttribute("inert","")}function w(){document.body.style.overflow="",document.body.style.height="";const e=document.getElementById("contact_modal"),t=document.querySelector(".background-modal"),o=document.querySelector(".close_modal_form"),n=document.querySelector(".header-photograph"),r=document.getElementById("main");e.style.display="none",e.setAttribute("aria-hidden","true"),t.style.display="none",o.removeEventListener("click",w),o.removeEventListener("keydown",T),window.removeEventListener("keydown",C),n.removeAttribute("aria-hidden"),n.removeAttribute("inert"),r.removeAttribute("aria-hidden"),r.removeAttribute("inert"),document.getElementById("firstnameError").style.display="none",document.getElementById("nameError").style.display="none",document.getElementById("emailError").style.display="none",document.getElementById("messageError").style.display="none",document.getElementById("firstname").style.border="none",document.getElementById("name").style.border="none",document.getElementById("email").style.border="none",document.getElementById("message").style.border="none",A&&A.focus()}async function Z(){const t=new URLSearchParams(window.location.search).get("id"),o=Number(t);if(t){const{photographerProfils:n}=await S(o);if(n){const r=document.querySelector(".modal-title"),i=document.createElement("span");i.classList.add("modal-title-name"),i.textContent=n.name,r.appendChild(i)}}}function J(e){e.preventDefault();let t=!0;const o=document.getElementById("firstname"),n=document.getElementById("name"),r=document.getElementById("email"),i=document.getElementById("message"),s=document.getElementById("firstnameError"),d=document.getElementById("nameError"),l=document.getElementById("emailError"),c=document.getElementById("messageError"),m=o.value.trim(),p=n.value.trim(),y=r.value.trim(),f=i.value.trim();X([o,n,r,i],[s,d,l,c]),D(m)||(k(o,s,"Le prénom est requis. Il doit contenir uniquement des lettres."),t=!1),D(p)||(k(n,d,"Le nom est requis. Il doit contenir uniquement des lettres."),t=!1),Y(y)||(k(r,l,"L'email n'est pas valide."),t=!1),ee(f)||(k(i,c,"Le message doit contenir au moins 10 caractères."),t=!1),t&&(console.log({firstnameInput:m,nameInput:p,emailInput:y,messageInput:f}),Q(o,n,r,i),w())}function Q(e,t,o,n){e.value="",t.value="",o.value="",n.value=""}function X(e,t){e.forEach(o=>o.style.border="none"),t.forEach(o=>{o.textContent="",o.style.display="none"})}function D(e){return e.length>=2&&/^[A-Za-z\s]+$/.test(e)}function Y(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function ee(e){return e.length>=10}function k(e,t,o){t.textContent=o,t.style.display="flex",e.style.border="3px solid red"}const L=document.querySelector(".modal-form");L==null||L.addEventListener("submit",J);Z();function O(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait;function t(){const n=document.createElement("article");return n.innerHTML=`
            <a href="./photographer.html?id=${this.id}" aria-label="Profil de ${this.name}">
                <img src="assets/photographers/${this.portrait}" alt="Photo de ${this.name}" tabIndex=0 />
                <h2 tabIndex=0>${this.name}</h2>
                <p class="overview-location" tabIndex=0>${this.city}, ${this.country}</p>
                <p class="overview-description" tabIndex=0>${this.tagline}</p>
                <p class="overview-price" tabIndex=0 aria-label="${this.price} euros par jour">${this.price}€/jour</p>
            </a>
        `,n}function o(){const n=document.querySelector(".photograph-header");n.innerHTML=`
                <div class="photograph-header-informations" tabIndex=0>
                    <h1 class="photograph-name" aria-label="${this.name}.">${this.name}</h1>
                    <address class="photograph-location">
                        <p class="photograph-city" aria-label="${this.city}.">${this.city},</p>
                        <p class="photograph-country" aria-label="${this.country}.">${this.country}</p>
                    </address>
                    <p class="photograph-description" aria-label="${this.tagline}.">${this.tagline}</p>
                </div>
                <button class="contact_button" aria-haspopup="dialog" aria-label="Ouvrir le formulaire de contact">Contactez-moi</button>
                <img class="photograph-img" src="./assets/photographers/${this.portrait?this.portrait:"account.png"}" alt="Photo de profil de ${this.name}" tabIndex=0></img>
            `;const r=document.querySelector(".price-per-day");r.innerHTML=`<p class="price" tabIndex=0 aria-label="Son tarif est de ${this.price}€ par jour">${this.price}€ / jour</p>`,document.querySelector(".contact_button").addEventListener("click",W)}return{id:this.id,name:this.name,city:this.city,country:this.country,tagline:this.tagline,price:this.price,portrait:this.portrait,getPhotographerPreviewDOM:t,getPhotographerProfilDOM:o}}async function F(){const e="/Fisheye-vite/photographers.json";try{const t=await fetch(e);if(!t.ok)throw new Error(`reponse : ${t.status}`);return await t.json()}catch(t){console.error(t.message)}}async function te(e){const t=document.querySelector(".photographer_section");t&&e.forEach(o=>{const n=new O(o);t.appendChild(n.getPhotographerPreviewDOM())})}async function oe(){const{photographers:e}=await F();te(e)}oe();
